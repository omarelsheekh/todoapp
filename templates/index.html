<html>
    <head>
        <title>TODO App</title>
    </head>
    <body>
        <form method="POST", id="form1">
            <div>
                <label>Create a Todo</label>
                <input type="text", id="description", name="description">
            </div>
            <div>
                <input type="submit", value="create">
            </div>
        </form>
        <br>
        <ul id="todos">
            {% for d in data %}
                <li> {{ d.description }} </li>
            {% endfor %}
        </ul>
        <script>
            var form1=document.getElementById('form1');
            form1.onsubmit=function(e){
                e.preventDefault();
                fetch('/todos/create',{
                    method : 'POST',
                    body : JSON.stringify({
                        'description' : document.getElementById('description').value
                    }),
                    headers :{
                        'Content-Type' : 'application/json'
                    }
                }).then(function(response){
                    return response.json();
                }).then(function(jsonResponse){
                    console.log(jsonResponse);
                    var listItem = document.createElement("li");
                    listItem.innerHTML = jsonResponse['description'];
                    document.getElementById("todos").appendChild(listItem)
                }).catch(function(){
                    console.log("error happend")
                })
            }
        </script>
    </body>
</html>